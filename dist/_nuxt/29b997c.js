(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{455:function(e,t,r){var content=r(508);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(25).default)("61a8aceb",content,!0,{sourceMap:!1})},507:function(e,t,r){"use strict";r(455)},508:function(e,t,r){var n=r(24)(!1);n.push([e.i,".card-flex-head{display:flex;justify-content:space-between;align-items:center;width:100%}",""]),e.exports=n},524:function(e,t,r){"use strict";r.r(t);var n=r(35),o=(r(106),r(76)),c=r.n(o),l={name:"Users",middleware:"auth",data:function(){return{successMessage:!1,errorMessage:!1,userFormPopupIsOpen:!1,headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Last login",value:"last_login"},{text:"Actions"}],users:[],userObject:{id:null,first_name:null,last_name:null,name:null,email:null},message:{type:null,text:null}}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchUsers();case 1:case"end":return t.stop()}}),t)})))()},methods:{submitUserFormPopup:function(){this.userObject._id?this.editUser():this.addUser()},colseUserFormPopup:function(){this.userFormPopupIsOpen=!1,this.userObject={id:null,first_name:null,last_name:null,name:null,email:null}},fetchUsers:function(){var e=this;c.a.get("/api/users/get").then((function(t){e.users=t.data.users})).catch((function(t){console.log(t),e.errorMessage=!0,e.message.text="Error during fetch users list"}))},addUser:function(){var e=this;c.a.post("/api/users/add",this.userObject).then((function(t){e.colseUserFormPopup(),e.fetchUsers(),e.successMessage=!0,e.message.text="User added to list",e.$toast.success("Added")})).catch((function(t){console.log(t),e.errorMessage=!0,e.message.text="Can not add user, Try again",e.$toast.error("Something went wrong")}))},deleteUser:function(e){var t=this;c.a.post("/api/users/delete",{userId:e}).then((function(e){t.fetchUsers(),t.successMessage=!0,t.message.text="User deleted",t.$toast.success("Deleted")})).catch((function(e){console.log(e),t.errorMessage=!0,t.message.text="Can not delete user, Try again",t.$toast.error("Something went wrong")}))},openEditUserPopup:function(e){this.userObject=JSON.parse(JSON.stringify(e)),this.userFormPopupIsOpen=!0},editUser:function(){var e=this;c.a.post("/api/users/edit",this.userObject).then((function(t){e.colseUserFormPopup(),e.fetchUsers(),e.successMessage=!0,e.message.text="user updated",e.$toast.success("Updated")})).catch((function(t){e.errorMessage=!0,e.message.text="Can not update user data, Try again",e.$toast.error("Something went wrong")}))}}},d=(r(507),r(75)),m=r(93),v=r.n(m),f=r(433),_=r(190),h=r(420),x=r(419),O=r(464),w=r(418),U=r(519),k=r(529),j=r(188),y=r(414),M=r(513),C=r(518),V=r(456),F=r(53),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",[r("v-col",{staticClass:"mb-3 col-12"},[r("v-card",{attrs:{elevation:"1"}},[r("v-card-title",[r("div",{staticClass:"card-flex-head"},[r("p",{staticClass:"ma-0"},[e._v("\n                \t\tUsers & Rules\n                \t")]),e._v(" "),r("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:function(t){e.userFormPopupIsOpen=!0}}},[r("v-icon",[e._v("mdi-plus")]),e._v("\n\t\t\t\t      Add\n\t\t\t\t    ")],1)],1)]),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,"items-per-page":10},scopedSlots:e._u([{key:"item",fn:function(t){return[r("tr",[r("td",[e._v(e._s(t.item.name))]),e._v(" "),r("td",[e._v(e._s(t.item.email))]),e._v(" "),r("td",[e._v(e._s(t.item.last_login?e.$moment(t.item.last_login).format("YYYY-MM-DD hh:mm A"):"Never"))]),e._v(" "),r("td",[r("v-btn",{staticStyle:{width:"35px"},attrs:{text:"",small:"",color:"primary"},on:{click:function(r){return e.openEditUserPopup(t.item)}}},[r("v-icon",[e._v("mdi-pencil")])],1),e._v(" "),r("v-btn",{staticStyle:{width:"35px"},attrs:{text:"",small:"",color:"red"},on:{click:function(r){return e.deleteUser(t.item._key)}}},[r("v-icon",[e._v("mdi-delete")])],1)],1)])]}}])})],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"600px",transition:"dialog-bottom-transition"},model:{value:e.userFormPopupIsOpen,callback:function(t){e.userFormPopupIsOpen=t},expression:"userFormPopupIsOpen"}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.submitUserFormPopup.apply(null,arguments)}}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e.userObject._id?r("span",[e._v("Edit user ")]):r("span",[e._v("Add new user")])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{attrs:{label:"First name*",required:""},model:{value:e.userObject.first_name,callback:function(t){e.$set(e.userObject,"first_name",t)},expression:"userObject.first_name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{attrs:{label:"Last name*",required:""},model:{value:e.userObject.last_name,callback:function(t){e.$set(e.userObject,"last_name",t)},expression:"userObject.last_name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{label:"Email*",required:""},model:{value:e.userObject.email,callback:function(t){e.$set(e.userObject,"email",t)},expression:"userObject.email"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-alert",{attrs:{dense:"",text:"",type:"info"}},[e._v("\n                \t* Default password for new users is "),r("code",[e._v("12345678")])])],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.userFormPopupIsOpen=!1}}},[e._v("\n            Close\n          ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"}},[e.userObject._id?r("span",[e._v("\n            \tUpdate\n            ")]):r("span",[e._v("\n            \tSave\n            ")])])],1)],1)],1)]),e._v(" "),r("v-snackbar",{attrs:{timeout:"1000"},on:{model:e.successMessage},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.successMessage=!1}}},"v-btn",n,!1),[e._v("\n          Close\n        ")])]}}])},[e._v("\n      "+e._s(e.message.text)+"\n\n      ")]),e._v(" "),r("v-snackbar",{attrs:{timeout:"1000"},on:{model:e.errorMessage},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[r("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.errorMessage=!1}}},"v-btn",n,!1),[e._v("\n          Close\n        ")])]}}])},[e._v("\n      "+e._s(e.message.text)+"\n\n      ")])],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VAlert:f.a,VBtn:_.a,VCard:h.a,VCardActions:x.a,VCardText:x.c,VCardTitle:x.d,VCol:O.a,VContainer:w.a,VDataTable:U.a,VDialog:k.a,VIcon:j.a,VRow:y.a,VSnackbar:M.a,VSpacer:C.a,VTextField:V.a,VToolbar:F.a})}}]);