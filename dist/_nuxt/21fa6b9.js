(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{442:function(e,t,n){var content=n(497);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(23).default)("61a8aceb",content,!0,{sourceMap:!1})},496:function(e,t,n){"use strict";n(442)},497:function(e,t,n){var r=n(22)(!1);r.push([e.i,".card-flex-head{display:flex;justify-content:space-between;align-items:center;width:100%}",""]),e.exports=r},516:function(e,t,n){"use strict";n.r(t);var r=n(35),o=(n(105),n(159)),l=n.n(o),c={name:"Users",middleware:"auth",data:function(){return{successMessage:!1,errorMessage:!1,userFormPopupIsOpen:!1,headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Last login",value:"last_login"},{text:"Actions"}],users:[],userObject:{id:null,first_name:null,last_name:null,name:null,email:null},message:{type:null,text:null}}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.fetchUsers();case 1:case"end":return t.stop()}}),t)})))()},methods:{submitUserFormPopup:function(){this.userObject._id?this.editUser():this.addUser()},colseUserFormPopup:function(){this.userFormPopupIsOpen=!1,this.userObject={id:null,first_name:null,last_name:null,name:null,email:null}},fetchUsers:function(){var e=this;l.a.get("/api/users/get").then((function(t){e.users=t.data.users})).catch((function(t){console.log(t),alert("something went wrong"),e.errorMessage=!0,e.message.text="Error during fetch users list"}))},addUser:function(){var e=this;l.a.post("/api/users/add",this.userObject).then((function(t){e.colseUserFormPopup(),e.fetchUsers(),e.successMessage=!0,e.message.text="User added to list"})).catch((function(t){console.log(t),e.errorMessage=!0,e.message.text="Can not add user, Try again"}))},deleteUser:function(e){var t=this;l.a.post("/api/users/delete",{userId:e}).then((function(e){t.fetchUsers(),t.successMessage=!0,t.message.text="User deleted"})).catch((function(e){console.log(e),t.errorMessage=!0,t.message.text="Can not delete user, Try again"}))},openEditUserPopup:function(e){this.userObject=JSON.parse(JSON.stringify(e)),this.userFormPopupIsOpen=!0},editUser:function(){var e=this;l.a.post("/api/users/edit",this.userObject).then((function(t){e.colseUserFormPopup(),e.fetchUsers(),e.successMessage=!0,e.message.text="user updated"})).catch((function(t){alert("something went wrong"),e.errorMessage=!0,e.message.text="Can not update user data, Try again"}))}}},d=(n(496),n(75)),m=n(92),v=n.n(m),f=n(431),_=n(191),h=n(432),x=n(419),O=n(508),w=n(418),k=n(512),U=n(521),j=n(189),y=n(414),M=n(510),C=n(511),V=n(443),F=n(51),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",{staticClass:"mb-3 col-12"},[n("v-card",{attrs:{elevation:"1"}},[n("v-card-title",[n("div",{staticClass:"card-flex-head"},[n("p",{staticClass:"ma-0"},[e._v("\n                \t\tActive listings \n                \t")]),e._v(" "),n("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:function(t){e.userFormPopupIsOpen=!0}}},[n("v-icon",[e._v("mdi-plus")]),e._v("\n\t\t\t\t      Add\n\t\t\t\t    ")],1)],1)]),e._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,"items-per-page":10},scopedSlots:e._u([{key:"item",fn:function(t){return[n("tr",[n("td",[e._v(e._s(t.item.name))]),e._v(" "),n("td",[e._v(e._s(t.item.email))]),e._v(" "),n("td",[e._v(e._s(t.item.last_login?e.$moment(t.item.last_login).format("YYYY-MM-DD hh:mm A"):"Never"))]),e._v(" "),n("td",[n("v-btn",{staticStyle:{width:"35px"},attrs:{text:"",small:"",color:"primary"},on:{click:function(n){return e.openEditUserPopup(t.item)}}},[n("v-icon",[e._v("mdi-pencil")])],1),e._v(" "),n("v-btn",{staticStyle:{width:"35px"},attrs:{text:"",small:"",color:"red"},on:{click:function(n){return e.deleteUser(t.item._key)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)])]}}])})],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"600px",transition:"dialog-bottom-transition"},model:{value:e.userFormPopupIsOpen,callback:function(t){e.userFormPopupIsOpen=t},expression:"userFormPopupIsOpen"}},[n("form",{on:{submit:function(t){return t.preventDefault(),e.submitUserFormPopup.apply(null,arguments)}}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:""}},[e.userObject._id?n("span",[e._v("Edit user ")]):n("span",[e._v("Add new user")])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"First name*",required:""},model:{value:e.userObject.first_name,callback:function(t){e.$set(e.userObject,"first_name",t)},expression:"userObject.first_name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[n("v-text-field",{attrs:{label:"Last name*",required:""},model:{value:e.userObject.last_name,callback:function(t){e.$set(e.userObject,"last_name",t)},expression:"userObject.last_name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Email*",required:""},model:{value:e.userObject.email,callback:function(t){e.$set(e.userObject,"email",t)},expression:"userObject.email"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-alert",{attrs:{dense:"",text:"",type:"info"}},[e._v("\n                \t* Default password for new users is "),n("code",[e._v("12345678")])])],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.userFormPopupIsOpen=!1}}},[e._v("\n            Close\n          ")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"}},[e.userObject._id?n("span",[e._v("\n            \tUpdate\n            ")]):n("span",[e._v("\n            \tSave\n            ")])])],1)],1)],1)]),e._v(" "),n("v-snackbar",{attrs:{timeout:"1000"},on:{model:e.successMessage},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.successMessage=!1}}},"v-btn",r,!1),[e._v("\n          Close\n        ")])]}}])},[e._v("\n      "+e._s(e.message.text)+"\n\n      ")]),e._v(" "),n("v-snackbar",{attrs:{timeout:"1000"},on:{model:e.errorMessage},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.attrs;return[n("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.errorMessage=!1}}},"v-btn",r,!1),[e._v("\n          Close\n        ")])]}}])},[e._v("\n      "+e._s(e.message.text)+"\n\n      ")])],1)}),[],!1,null,null,null);t.default=component.exports;v()(component,{VAlert:f.a,VBtn:_.a,VCard:h.a,VCardActions:x.a,VCardText:x.c,VCardTitle:x.d,VCol:O.a,VContainer:w.a,VDataTable:k.a,VDialog:U.a,VIcon:j.a,VRow:y.a,VSnackbar:M.a,VSpacer:C.a,VTextField:V.a,VToolbar:F.a})}}]);